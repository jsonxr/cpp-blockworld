#!/bin/bash

# install/activate emscripten
libs/emsdk/emsdk install 4.0.20
libs/emsdk/emsdk activate 4.0.20
source libs/emsdk/emsdk_env.sh

BUILD=build/wasm
BUILD_TYPE=Debug

conan install . -pr profiles/emscripten -s build_type=$BUILD_TYPE --output-folder=$BUILD --build missing
emcmake cmake -S . -B $BUILD -DCMAKE_TOOLCHAIN_FILE=$BUILD/conan_toolchain.cmake -DCMAKE_BUILD_TYPE=$BUILD_TYPE
cmake --build $BUILD
